<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>AndroidStudio单元测试——instrumentation | Vincent&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="article">
<meta property="og:title" content="AndroidStudio单元测试——instrumentation">
<meta property="og:url" content="http://yoursite.com/2014/11/11/android-studio-guide-2/">
<meta property="og:site_name" content="Vincent's Blog">
<meta property="og:description">
<meta property="og:image" content="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/02/vs1.png">
<meta property="og:image" content="http://i0.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.26.20-PM.png">
<meta property="og:image" content="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/instrumentationtest.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/edit-configurations.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.42.43-PM.png">
<meta property="og:image" content="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.46.19-PM.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.35.01-PM.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/settings.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/configurations.png">
<meta property="og:image" content="http://i0.wp.com/rexstjohn.com/wp-content/uploads/2014/01/test-config.png">
<meta property="og:image" content="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/test.png">
<meta property="og:image" content="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-7.10.25-PM.png">
<meta property="og:image" content="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/LogCat.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AndroidStudio单元测试——instrumentation">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="Vincent&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

  	<SCRIPT type=text/javascript src="/js/scrolltop.js"></SCRIPT>

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vincent&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Walk steps step by step</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/vincent-wjj" title="Github" target="_blank"></a>
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed" target="_blank"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-android-studio-guide-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2014/11/11/android-studio-guide-2/" class="article-date">
  <time datetime="2014-11-11T14:04:55.000Z" itemprop="datePublished">11月 11 2014</time>
</a>


    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android-studio/">android_studio</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      AndroidStudio单元测试——instrumentation
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
		
		<div id="toc" class="toc-article">
			<h2 class="toc-title"><span>文章目录</span></h2>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Enabling_Unit_Testing_In_Android_Studio"><span class="toc-number">1.</span> <span class="toc-text">Enabling Unit Testing In Android Studio</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Creating_Your_Unit_Testing_Folder"><span class="toc-number">2.</span> <span class="toc-text">Creating Your Unit Testing Folder</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#*REMEMBER*"><span class="toc-number">3.</span> <span class="toc-text">*REMEMBER*</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Configuring_The_Project_For_Unit_Testing"><span class="toc-number">4.</span> <span class="toc-text">Configuring The Project For Unit Testing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Running_Our_Unit_Tests"><span class="toc-number">5.</span> <span class="toc-text">Running Our Unit Tests</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_following_sources_were_helpful_in_compiling_this_article:"><span class="toc-number">6.</span> <span class="toc-text">The following sources were helpful in compiling this article:</span></a></li></ol>
		
		</div>
		
        <p><img src="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/02/vs1.png" alt=""><br>This article covers the basics of using Android Unit Tests with Android Studio.</p>
<h1 id="Enabling_Unit_Testing_In_Android_Studio">Enabling Unit Testing In Android Studio</h1>
<p>Many guides out there will encourage you to add some lines  in your “build.gradle” to enable “instrument tests” and also tell you to include the Android testing libraries in your dependencies…</p>
<p>This is completely unnecessary and you won’t need to worry about doing that.</p>
<p>Android Studio supports Android Unit Tests natively and you can enable them by setting a few options in your project configuration.</p>
<p>Note: There are several popular unit testing frameworks such as <code>Robolectric</code> for Android which involve more set up and configuration than what I cover here. I hope to write a guide on that topic in the future.</p>
<h1 id="Creating_Your_Unit_Testing_Folder">Creating Your Unit Testing Folder</h1>
<p>I like to keep my unit tests in my main project package e.g. “com.mypath.tests.” You can put your own tests  wherever  you want. To get started, create a new directory “tests” in your desired test location like so:<br><img src="http://i0.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.26.20-PM.png" alt=""></p>
<p>Next, create a new class and name it “ExampleTest.” Have it inherit from “InstrumentationTestCase:”</p>
<p><img src="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/instrumentationtest.png" alt=""></p>
<p>Lets add a simple test which we know will fail:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleTest</span> <span class="keyword">extends</span> <span class="title">InstrumentationTestCase</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span>() <span class="keyword">throws</span> Exception {</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> reality = <span class="number">5</span>;</div><div class="line">        assertEquals(expected, reality);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h1 id="*REMEMBER*"><strong>*</strong>REMEMBER<strong>*</strong></h1>
<p><strong><em>All test methods MUST start with the “test-” prefix or Android Studio will not detect them as tests and you will get all kinds of weird errors and nothing will work.</em></strong></p>
<h1 id="Configuring_The_Project_For_Unit_Testing">Configuring The Project For Unit Testing</h1>
<p>Now that we have a test case which is doomed for failure, we must now run it.</p>
<p>Start by clicking “Run -&gt; Edit Configurations.”</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/edit-configurations.png" alt=""></p>
<p>Now select “+ -&gt; Android Tests” from the upper left hand corner and select “Android Tests” and name your new test configuration “test” or something equally relevant.</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.42.43-PM.png" alt=""></p>
<p>This will create a new test project configuration like this:</p>
<p><img src="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.46.19-PM.png" alt=""></p>
<p>Select your current app module from the drop down menu.</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-6.35.01-PM.png" alt=""></p>
<p>Next, select the “All in Package” option and navigate to your “test” folder you just created. You can also select “All in Module” and Android Studio will automatically find any test inside your whole Module! You can also get more specific and select “Class” or even “Method” option to narrow the scope of your testing down further.</p>
<p>The results should look like this:</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/settings.png" alt=""></p>
<p>I also like to set the run configuration to “Show Chooser” so I can decide how to run the tests when needed:</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/configurations.png" alt=""></p>
<p>Now click “Apply” and then “Close.” You should now see your test cases as being a runnable project configuration in the bar across the top of your Android Studio instance.</p>
<p><img src="http://i0.wp.com/rexstjohn.com/wp-content/uploads/2014/01/test-config.png" alt=""></p>
<h1 id="Running_Our_Unit_Tests">Running Our Unit Tests</h1>
<p>I use <code>Genymotion for everything</code>, so fire up your Genymotion instance and run the test.</p>
<p>Put a break point next to the assertion line in the test case we just created and click the “run debug mode.” The purpose is to prove to ourselves that Android Studio is really running our Unit Test case.</p>
<p><img src="http://i2.wp.com/rexstjohn.com/wp-content/uploads/2014/01/test.png" alt=""></p>
<p>When you start your tests, you will now see a special testing display window “Running Tests…”</p>
<p><img src="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/Screen-Shot-2014-01-24-at-7.10.25-PM.png" alt=""></p>
<p>When your test fails, click “Logcat” and view the results for a comprehensive output as to why your test failed:</p>
<p><img src="http://i1.wp.com/rexstjohn.com/wp-content/uploads/2014/01/LogCat.png" alt=""></p>
<p>If you go through the console, you will find the given reason should be: “junit.framework.AssertionFailedError: expected:<1> but was:<5>”</5></1></p>
<p>Congratulations, you have failed!</p>
<h1 id="The_following_sources_were_helpful_in_compiling_this_article:">The following sources were helpful in compiling this article:</h1>
<p><a href="http://mobilengineering.blogspot.com/2012/05/tdd-testing-asynctasks-on-android.html" target="_blank" rel="external">http://mobilengineering.blogspot.com/2012/05/tdd-testing-asynctasks-on-android.html</a><br><a href="http://www.vogella.com/tutorials/AndroidTesting/article.html" target="_blank" rel="external">http://www.vogella.com/tutorials/AndroidTesting/article.html</a><br><a href="http://nikolaj.hesselholtskov.dk/2013/10/how-to-add-unit-tests-to-android-studio.html" target="_blank" rel="external">http://nikolaj.hesselholtskov.dk/2013/10/how-to-add-unit-tests-to-android-studio.html</a></p>
<p>转载自：<a href="http://rexstjohn.com/unit-testing-with-android-studio/" target="_blank" rel="external">http://rexstjohn.com/unit-testing-with-android-studio/</a></p>

      
    </div>
    <footer class="article-footer">
	  
	  <!-- 百度分享 Start -->
	  <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
	  <!-- 百度分享 End -->
	  
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/安卓/">安卓</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/测试/">测试</a></li></ul>

	  
<span>
更新日期:<time datetime="2014-11-11T14:22:16.000Z" itemprop="dateModified">11月 11 2014</time>
</span>


    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/11/12/interview-guide-1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Java面试题目
        
      </div>
    </a>
  
  
    <a href="/2014/11/11/android-studio-guide-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">android_studio快捷键</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-android-studio-guide-2" data-title="AndroidStudio单元测试——instrumentation" data-url="http://yoursite.com/2014/11/11/android-studio-guide-2/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'junjie'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
  
</section>
        
          
  <div id="toc" class="toc-aside">
  <h2 class="toc-title">文章目录</h2>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Enabling_Unit_Testing_In_Android_Studio"><span class="toc-number">1.</span> <span class="toc-text">Enabling Unit Testing In Android Studio</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Creating_Your_Unit_Testing_Folder"><span class="toc-number">2.</span> <span class="toc-text">Creating Your Unit Testing Folder</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#*REMEMBER*"><span class="toc-number">3.</span> <span class="toc-text">*REMEMBER*</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Configuring_The_Project_For_Unit_Testing"><span class="toc-number">4.</span> <span class="toc-text">Configuring The Project For Unit Testing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Running_Our_Unit_Tests"><span class="toc-number">5.</span> <span class="toc-text">Running Our Unit Tests</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_following_sources_were_helpful_in_compiling_this_article:"><span class="toc-number">6.</span> <span class="toc-text">The following sources were helpful in compiling this article:</span></a></li></ol>
  </div>

<aside id="sidebar">

  
    
<div class="widget-wrap">
  <h3 class="widget-title">ABOUT ME</h3>
  <ul class="widget about-me">
    
    <li><img class="author" title="About me" src="http://www.gravatar.com/avatar/2d4d8140ce05769ecdf75daa1da2908e?s=180" /></li>
    
    
    <li>Hi,I'm vincent.This is a shared world.</li>
    
  </ul>
</div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android-studio/">android_studio</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/taobaoCode/">taobaoCode</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java，I-O流/">Java，I/O流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安卓/">安卓</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快捷键/">快捷键</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文章/">文章</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/淘宝，文章/">淘宝，文章</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔试题目/">笔试题目</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Java/" style="font-size: 15.33px; color: #5dbe94;">Java</a><a href="/tags/Java，I-O流/" style="font-size: 15.33px; color: #5dbe94;">Java，I/O流</a><a href="/tags/linux/" style="font-size: 15.33px; color: #5dbe94;">linux</a><a href="/tags/linux操作系统/" style="font-size: 13.00px; color: #7dc3de;">linux操作系统</a><a href="/tags/博客/" style="font-size: 20.00px; color: #1db400;">博客</a><a href="/tags/安卓/" style="font-size: 17.67px; color: #3db94a;">安卓</a><a href="/tags/快捷键/" style="font-size: 15.33px; color: #5dbe94;">快捷键</a><a href="/tags/文章/" style="font-size: 20.00px; color: #1db400;">文章</a><a href="/tags/测试/" style="font-size: 15.33px; color: #5dbe94;">测试</a><a href="/tags/淘宝，文章/" style="font-size: 15.33px; color: #5dbe94;">淘宝，文章</a><a href="/tags/笔试题目/" style="font-size: 15.33px; color: #5dbe94;">笔试题目</a>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">日历</h3>
  <div class="widget">
    <div id="g-calendar" class="g-calendar">
        <span class="g-calendar-prev"></span>
		 
        <span class="g-calendar-back"></span>
        <span class="g-calendar-now"></span>
		 
        <span class="g-calendar-next"></span>
        <div class="g-calendar-hd"></div>
        <div class="g-calendar-tit"></div>
        <div class="g-calendar-bd"></div>
    </div>
  </div>
</div>
<script type="text/javascript">
function LGY_calendar(wrapId, options){
    this.oWrap = this.getId(wrapId);
    this.oHead = this.getByClassName('g-calendar-hd',this.oWrap)[0];
    this.oBody = this.getByClassName('g-calendar-bd',this.oWrap)[0];
    this.oTit = this.getByClassName('g-calendar-tit',this.oWrap)[0];
    this.oPrev = this.getByClassName('g-calendar-prev',this.oWrap)[0];
    this.oNext = this.getByClassName('g-calendar-next',this.oWrap)[0];
    this.oNow = this.getByClassName('g-calendar-now',this.oWrap)[0];
    this.oBack = this.getByClassName('g-calendar-back',this.oWrap)[0];
    this.init();
}
LGY_calendar.prototype = {
    ///////////获取ID元素
    getId:function(id){
        return document.getElementById(id);
    },
    ////////获取css类名元素
    getByClassName:function(className,parent){
        var elem = [],
            node = parent != undefined&&parent.nodeType==1?parent.getElementsByTagName('*'):document.getElementsByTagName('*'),
            p = new RegExp("(^|\\s)"+className+"(\\s|$)");
        for(var n=0,i=node.length;n<i;n++){
            if(p.test(node[n].className)){
                elem.push(node[n]);
            }
        }
        return elem;
    },
    //填充日历
    fillDate:function(year,month){
        //本月份第一天是星期几-为显示上个月的天数做铺垫
        var first_day = new Date(year,month,1).getDay(),
        //如果刚好是星期天，则空出一行（显示上个月的天数）
            first_day = first_day == 0?first_day=7:first_day;
        //本月份最后一天是几号
        var final_date = new Date(year,month+1,0).getDate(),
        //上个月的最后一天是几号
            last_date = new Date(year,month,0).getDate(),
        //剩余的格子数--即排在末尾的格子数
            surplus = 42 - first_day - final_date;
		//设置年的链接
		var yearHead = "<a href='/" + "archives/" + year + "/'>" + year + " "+ "</a>"; 
		//设置年的链接
		var monthHead = "";
		var month1 = month + 1;
		if (month1 < 10) {
			monthHead = "<a href='/" + "archives/" + year + "/" + "0" + month1 + "/'>" + " " + month1 + " " + "</a>";
		} else {
			monthHead = "<a href='/" + "archives/" + year + "/" + month1 + "/'>" + " " + month1 + " " + "</a>";
		}
        //设置表头的日历
        this.oHead.innerHTML = yearHead+'年'+monthHead+'月';
        //填充日历执行
        var html = '';
        //上个月的显示天数
        for(var i=0;i<first_day;i++){
            html+='<span class="g-calendar-grey">'+(last_date-(first_day-1)+i)+'</span>';
        }
        //本月的显示天数
        var postdate = new Date("Tue Nov 11 2014 22:04:55 GMT+0800"); 
		if (true && postdate.getFullYear() == year && postdate.getMonth() == month) { 
			html += '<span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span><a href="/2014/11/11/linux-guide/" title="当天有3篇博客,第一篇:linux-guide">11</a></span><span><a href="/2014/11/12/interview-guide-1/" title="Java面试题目">12</a></span><span><a href="/2014/11/13/Java-I-O/" title="Java I/O流整理分析">13</a></span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span>';
		} else {
			for(var j=0;j<final_date;j++){        
				html+='<span id="d'+(j+1)+'">'+(j+1)+'</span>';
			}
		}
        //下个月的显示天数
        for(var k=0;k<surplus;k++){
            html+='<span class="g-calendar-grey">'+(k+1)+'</span>';
        }
        //fill
        this.oBody.innerHTML = html;
        // 当前状态
        if(year==this.c_year&&this.c_month==month){
            this.oBody.getElementsByTagName('span')[first_day+this.date-1].className='g-calendar-on';
        }

		// 对所有文章遍历,然后将有文章的日期加上链接,如果文章太多的话,生成页面会很大,去掉了
		
    },
    // next切换
    next:function(){
        var _that = this;
        this.oNext.onclick = function(){
            _that.month++;
            if(_that.month>11){
                _that.month = 0;
                _that.year++;
            }
            // 填充日历
            _that.fillDate(_that.year,_that.month);
        }
        
    },
    // back 切换
    back:function(){
        var _that = this;
        this.oBack.onclick = function(){
            var postdate = new Date("Tue Nov 11 2014 22:04:55 GMT+0800"); 
            _that.year = postdate.getFullYear();
            _that.month = postdate.getMonth();
            // 填充日历
            _that.fillDate(_that.year,_that.month);
        }
        
    },
    // now切换
    now:function(){
        var _that = this;
        this.oNow.onclick = function(){
            var nowDate = new Date(); 
            _that.year = nowDate.getFullYear();
            _that.month = nowDate.getMonth();
            // 填充日历
            _that.fillDate(_that.year,_that.month);
        }
        
    },
    // prev切换
    prev:function(){
        var _that = this;
        this.oPrev.onclick = function(){
            _that.month--;
            if(_that.month<0){
                _that.month = 11;
                _that.year--;
            }
            // 填充日历
            _that.fillDate(_that.year,_that.month);
        }
        
    },
    init:function(){
        this.oTit.innerHTML = '<span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>';
        // 获取今天的日历时间
        var now = new Date();
        this.c_year = this.year = now.getFullYear();
        this.c_month = this.month = now.getMonth();
        this.date = now.getDate();
        // 初始化--填充日历
        this.fillDate(this.year,this.month);
        //next切换
        this.next();
        //prev切换
        this.prev();
        //back 切换
        this.back();
        //now 切换
        this.now();
    }
}
new LGY_calendar('g-calendar');
</script>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/11/13/Java-I-O/">Java I/O流整理分析</a>
          </li>
        
          <li>
            <a href="/2014/11/12/interview-guide-1/">Java面试题目</a>
          </li>
        
          <li>
            <a href="/2014/11/11/android-studio-guide-2/">AndroidStudio单元测试——instrumentation</a>
          </li>
        
          <li>
            <a href="/2014/11/11/android-studio-guide-1/">android_studio快捷键</a>
          </li>
        
          <li>
            <a href="/2014/11/11/linux-guide/">linux-guide</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
<div class="widget-wrap">
  <h3 class="widget-title">最新评论</h3>
  <ul class="widget ds-recent-comments" data-num-items="5" data-show-avatars="0" data-show-title="1" data-show-time="1"></ul>
</div>
<!-- 需要多说的公用代码 -->


  
    
<div class="widget-wrap">
  <h3 class="widget-title">友情链接</h3>
  <ul class="widget">
    
    <li><a href="https://github.com/zippera" target="_BLANK">404 page</a></li>
    
  </ul>
</div>


  

</aside>

        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 junjiewang<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/howiefh/hexo-theme-landscape-f" target="_blank" title="Landscape-F">Landscape-F</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<!-- 多说公共JS代码 start (一个网页只需插入一次) -->

<script type="text/javascript">
  var duoshuoQuery = {short_name:"junjie"};
  (function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 

<!-- 多说公共JS代码 end -->

<!-- 百度分享 start -->

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","douban","bdysc","sqq","qq","hi","baidu","huaban","youdao","sdo","mail","xg","diandian","fx","copy","print"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<!--
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.min.js"></script>
-->
<script src="/js/jquery.min.js" type="text/javascript"></script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<div class="bottom-btn">

	<a class="icon-gotop" href="javascript:void(0)" title="返回顶部"></a>
	<script src="/js/gotop.js" type="text/javascript"></script>

	<!--
	<script src="/js/gotop.js"></script>
	-->


	<a class="icon-toc-toggle" href="javascript:void(0)" title="文章目录"></a>
	<!--
	<script src="/js/toc_aside_toggle.js"></script>
	-->

</div>
<script src="/js/toc_aside_toggle.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
  <DIV style="DISPLAY: none" id=goTopBtn title="Scroll Back to Top"><IMG border=0 src="/images/top.jpg"></DIV>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
